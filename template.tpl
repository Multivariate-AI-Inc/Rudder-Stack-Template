// Copyright 2025 Multivariate AI
___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Rudder Stack",
  "brand": {
    "id": "brand_dummy",
    "displayName": "Multivariate-AI-Inc",
    "categories": ["ANALYTICS"],
    "thumbnail": "data:image/png;base64,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QAEoAAJQAApAARCAAlAACoAAFIACUAAEoAAUgAIgAAWgABQAASgABaAACEABKAAFQAAKQAEoAAJQAApAARCAAlAACoAAFIACUAAEoAAUgAIgAAWgABQAASgABUAABKAAFAABEIACUAAEQAAKQAEQAAEoAAVAAASgABQAARCAAlAABEAACkABEAABKAAFQAAEoAAUAAEoAAWgAAhAASgABUAACkABKAACUAAKQAEQgAJQAAqAABSAAlAABKAAFIACIAAFoAAUAAEoAAWgAAhAASgABUAACkABKAACUAAKQAEQgAJQAAqAABSAAlAABKAAFIACIAAFoAAUAAEoAAWgAAhAASgABUAACkABKAACUAAKQAEQgAJQAAqAABSAAlAABKAAFIACIAAFoAAUAAEoAAWgAAhAASgABUAACkABKAACUAAKgAAIQAEoAAIgAAWgAAiAABSAAiAAAlAACoAACEABKAACIAAFoAAIgAAUgAIgAAJQAAqAAAhAASgAAlAACkABEIACUAAKgAAUgAJQAASgABSAAiAABaAAFAABKAAFoAAIQAEoAAVAAApAASgAAlAACkABEIACUAAKgAAUgAJQAASgABSAAiAABaAAFAABKAAFoAAIQAEoAAVAAApAASgAAlAACkABEIACUAAKgAAUgAJQAASgABSAAiAABaAAFAABKAAFoAAIQAEoAAVAAApAASgAAlAACkABEIACUAAKgAAUgAJQAASgABQAAXyPAJrkNmyZb8NEWQDz0/MDjb8w731TPMr5jWEWwHbs5bsyvzILYE3lu1IconitnkOUBdAkAljTfS5zyXenIoD1jGpzOVhU9bx2j3ya0YkjPxRAv2Hz97Y+l+Tu5AKYHycDrY6/sjupAJom3+bkpLr0Ev46AXRPB3bjbWhDaJM/oZ2/t9OD0JX+Olie1gYK24GmXxj3vp/Fo1gA67nEWzbEVADLLCYBbGdR+K68ZjQN8UiGKFyr1zvzIYZFhUkA3XZ2owA22zy9oXAzr11YLao+l+FPaVHd3nl90ZGXzut92OZBALdkX5ZF7d+drQCWWSQD5Rtc2p1RAE2yqPSTr8kn713CHy+A5na7NY/hNty23IeNuyYv/cm2sh9ioDrQLR9o+IXhon/0sygcZTaXuDvE+MproOJyCn9Z9g9el+v5ddsMUZrLPb8eyxAxHSIZqL7N98JfTc12Xz7296W2qGV3vufIC3v0Pg/x3M90X5ZF7d+djQDuySySgVYbXNud6yCA+942J0Msi4q/SADPnbj0pD+vGA4qe2V1jCkxf2n39eFBbei3U0NU5lj6sFj5gBPLjAdz3J1drC0hnhmuNpeDIU4s5P8deawMnS4z7i7ksruQeO5Q92YRT33y7qJ+uABinL8WcfiP9J/pwfxCLI6Rvb860N7r+0PH80PXPiwW1x8v1SHynYqHW1ic3VvlPbGy5IN9ORzieCEHe3TmAw726Pnj+gadOuCDp9WxPW7rAAABy0lEQVQNzs40Zj8f7FH1Ev5oAfQ7FNOfV+Sv14aIfztQ/gv7Q58a4tQs8g+oDlF964khCq+f386/3pfzT7/syA/2KH7LQk6caX0WJ27trxMAgH8WAgAIAAABACAAAAQAgAAAEAAAAgBAAAAIAAABACAAAAQAgAAAEAAAAgBAAAAIAAABACAAAAQAgAAAEAAAAgBAAAAIAAABACAAAAQAgAAAEAAAAgBAAAAIAAABACAAAAQAEIAtAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAAQAAACAEAAAAgAAAEAIAAABACAAAB8nQAAAAAAAAAAAAAA/DT+A/leFhVF20LbAAAAAElFTkSuQmCC"
  },
  "description": "This template enables the sending of\\custom tracking events to RudderStack. It integrates client-side and server-side event data, including event properties, user identification, and custom attributes",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "url",
    "displayName": "Destination URL",
    "simpleValueType": true,
    "valueHint": "Your rudderstack dataplane url"
  },
  {
    "type": "TEXT",
    "name": "writeKey",
    "displayName": "Write Key",
    "simpleValueType": true,
    "valueHint": "Your rudderstack Write key"
  },
  {
    "type": "CHECKBOX",
    "name": "includeEventData",
    "checkboxText": "Include in the body tracks all Event Data",
    "simpleValueType": true,
    "help": "If checked, will add to the request body all Event Data values.",
    "defaultValue": true
  },
  {
    "type": "CHECKBOX",
    "name": "inside_array",
    "checkboxText": "Put request object inside the array.",
    "simpleValueType": true,
    "help": "If you want to convert the request object into this [object].",
    "defaultValue": true
  },
  {
    "type": "GROUP",
    "name": "trackType",
    "displayName": "Tracking Type",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "RADIO",
        "name": "tracking",
        "displayName": "",
        "radioItems": [
          {
            "value": "identify",
            "displayValue": "Identify"
          },
          {
            "value": "track",
            "displayValue": "Track"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "track"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "requestData",
    "displayName": "Request Data",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "LABEL",
        "name": "start",
        "displayName": "{"
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "data",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Property",
            "name": "key",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add Value"
      },
      {
        "type": "LABEL",
        "name": "end",
        "displayName": "}"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "requestHeaders",
    "displayName": "Request Headers",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "headers",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "key",
            "name": "key",
            "type": "TEXT",
            "isUnique": true
          },
          {
            "defaultValue": "",
            "displayName": "value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add Header"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "requestTimeout",
    "displayName": "Request Timeout",
    "simpleValueType": true,
    "defaultValue": 3000,
    "valueValidators": [
      {
        "type": "POSITIVE_NUMBER"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "logsGroup",
    "displayName": "Logs Settings",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "RADIO",
        "name": "logType",
        "displayName": "",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log"
          },
          {
            "value": "debug",
            "displayValue": "Log to console during debug and preview"
          },
          {
            "value": "always",
            "displayValue": "Always log to console"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "debug"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const sendHttpRequest = require('sendHttpRequest');
const getAllEventData = require('getAllEventData');
const getEventData = require('getEventData');
const makeInteger = require('makeInteger');
const makeTableMap = require('makeTableMap');
const JSON = require('JSON');
const toBase64 = require('toBase64');
const getRequestHeader = require('getRequestHeader');
const logToConsole = require('logToConsole');
const getContainerVersion = require('getContainerVersion');
const containerVersion = getContainerVersion();
const isDebug = containerVersion.debugMode;
const isLoggingEnabled = determineIsLoggingEnabled();

const traceId = getRequestHeader('trace-id');
const url = data.url + "/v1/" + data.tracking;

let postBodyData = {};

const token = toBase64(data.writeKey + ":") ;

const postHeaders = { 'Content-Type': 'application/json', 'Authorization' : 'Basic '+ token };
if (data.includeEventData) {
    postBodyData = getAllEventData();
}

if (data.headers) {
    for (let key in data.headers) {
        postHeaders[data.headers[key].key] = data.headers[key].value;
    }
}
let client_id = getEventData('client_id');

if (data.data) {
    let postBodyCustomData = data.simple_object ? createSimpleObject() : createNestedObject();
    for (let key in postBodyCustomData) {
        if (key == 'client_id') {
            const parts = (postBodyCustomData[key]).split('.');
            client_id = parts.length >= 4 ? parts[2] + "." + parts[3] : parts[0] + "." + parts[1];
            postBodyData[key] = client_id || postBodyCustomData[key];
        } else {
            postBodyData[key] = postBodyCustomData[key];
        }
    }
}

if (data.flatten) {
    postBodyData = escapeKeys(flatten(postBodyData));
}

if (data.inside_array) {
    postBodyData = [postBodyData];
}


if (data.tracking == "track") {
    postBodyData = {
        userId: client_id,
        event: getEventData('event_name'),
        properties: postBodyData,
        context: {
            ip: getEventData('ip_override'),
            library: {
                name: getEventData('page_location')
            }
        }
    };
} else {
    postBodyData = {
        userId: client_id,
        context: {
            traits: postBodyData,
            ip: getEventData('ip_override'),
            library: {
                name: getEventData('page_location')
            }
        }
    };
}

const postBody = JSON.stringify(postBodyData);
let requestOptions = { headers: postHeaders, method: "POST" };

if (data.requestTimeout) {
    requestOptions.timeout = makeInteger(data.requestTimeout);
}


sendHttpRequest(url, (statusCode, headers, body) => {
    if (isLoggingEnabled) {
        logToConsole(JSON.stringify({
            'Name': 'JsonRequest',
            'Type': 'Response',
            'TraceId': traceId,
            'ResponseStatusCode': statusCode,
            'ResponseHeaders': headers,
            'ResponseBody': body,
        }));
    }

    if (statusCode >= 200 && statusCode < 300) {
        data.gtmOnSuccess();
    } else {
        data.gtmOnFailure();
    }
}, requestOptions, postBody);

function escapeKeys(obj) {
    var toReturn = {};

    for (let key in obj) {
        let newKey = key.split("-").join("_");

        toReturn[newKey] = obj[key];
    }

    return toReturn;
}

function flatten(ob) {
    var toReturn = {};

    for (let i in ob) {
        if (!ob.hasOwnProperty(i)) continue;

        if ((typeof ob[i]) == 'object') {
            var flatObject = flatten(ob[i]);
            for (var x in flatObject) {
                if (!flatObject.hasOwnProperty(x)) continue;

                toReturn[i + '_' + x] = flatObject[x];
            }
        } else {
            toReturn[i] = ob[i];
        }
    }
    return toReturn;
}

function createSimpleObject() {
    return makeTableMap(data.data, 'key', 'value');
}


function mergeObjects() {
    let obj = {},
        i = 0,
        il = arguments.length,
        key;
    for (; i < il; i++) {
        for (key in arguments[i]) {
            if (arguments[i][key]) {
                obj[key] = arguments[i][key];
            }
        }
    }
    return obj;
}

function createNestedObject() {
    let object = {};

    for (let key in data.data) {
        let dotPath = data.data[key].key;
        let rootProperty = dotPath.split('.')[0];
        let strObj = strToObj(dotPath, data.data[key].value)[rootProperty];

        if (object[rootProperty]) {
            object[rootProperty] = mergeObjects(object[rootProperty], strObj);
        } else {
            object[rootProperty] = strObj;
        }
    }

    return object;
}

function strToObj(dotPath, val) {
    let i, obj = {}, dotArr = dotPath.split('.');
    let x = obj;

    for (i = 0; i < dotArr.length - 1; i++) {
        x = x[dotArr[i]] = {};
    }

    x[dotArr[i]] = val;

    return obj;
}

function determineIsLoggingEnabled() {
    if (!data.logType) return isDebug;

    switch (data.logType) {
        case 'no':
            return false;
        case 'debug':
            return isDebug;
        case 'always':
            return true;
        default:
            return true;
    }
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 25/01/2025, 13:08:33


